{% extends 'base.html' %}

{% block meta %}
<title>Admin Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Caveat:wght@700&display=swap" rel="stylesheet">
{% endblock meta %}

{% block content %}
{% load static %}  <!-- Load the static template tag -->

<main class="admin-dashboard">
    <h1>Daftar Pengguna</h1>
    {% comment %} <h2>Daftar Pengguna</h2> {% endcomment %}

    <!-- Daftar user -->
    <ul style="list-style: none; padding: 0;">
        {% for user in users %}
        <li style="margin-bottom: 20px; display: flex; align-items: center;">
            <!-- Gambar logo user dari profil jika tersedia -->
            {% if user.profile.profile_image %}
                <img src="{{ user.profile.profile_image.url }}" alt="User Logo" style="border-radius: 50%; margin-right: 15px; width: 50px; height: 50px;">
            {% else %}
                <img src="{% static 'image/user.png' %}" alt="Default User Logo" style="border-radius: 50%; margin-right: 15px; width: 50px; height: 50px;">
            {% endif %}
            
            <div>
                <!-- Informasi pengguna -->
                <p><strong>Username:</strong> {{ user.username }}</p>
                <p><strong>Email:</strong> {{ user.email }}</p>
                <p><strong>Nomor Telepon:</strong> {{ user.profile.phone_number }}</p>
                <p><strong>Gender:</strong> 
                    {% if user.profile.gender == 'M' %}
                        Male
                    {% else %}
                        Female 
                    {% endif %}
                </p>                
                <p><strong>Role:</strong> {{ user.is_staff|yesno:"Admin,User" }}</p>
                <a href="{% url 'main:delete_user' user.pk %}">
                    <button class="btn">Delete</button>
                </a>
            </div>
        </li>
        {% empty %}
        <li>Tidak ada pengguna yang terdaftar.</li>
        {% endfor %}
    </ul>

    <!-- Link untuk menambah pengguna baru -->
    <p><a href="{% url 'main:register' %}">Add New User</a></p>
</main>
{% endblock content %}
